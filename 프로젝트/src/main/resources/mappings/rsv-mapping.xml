<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reservationDAO">
	<insert id="insertRsv">
		
	</insert>
	<update id="cancelRsv">
		UPDATE reservation SET state=4 WHERE rno=#{rno}; 
	</update>
	<select id="getRsv" resultType="reservation">
		SELECT * FROM reservation WHERE mno=#{mno};
	</select>
	<select id="getRsvListPs" resultType="reservation">
		SELECT rno rsvNum,a.mno,bname,phone,rdate rsvDate FROM (SELECT * FROM reservation WHERE mno=#{no} AND stno=#{state}) a, business  
		WHERE a.bno=business.bno
		ORDER BY rno
		LIMIT #{rowStartNum},#{POSTS_PER_PAGE};
	</select>
	<select id="getRsvListBs" resultType="reservation">
		SELECT * FROM reservation WHERE bno=#{bno};
	</select>
	<select id="getLaundry" resultType="laundry">
		SELECT r.lno,lname laundry,cnt count,stno state, price*cnt price 
		FROM rsv_laundry r, laundry_type t, (SELECT * FROM bsn_laundry WHERE bno=1) bl 
		WHERE r.lno=t.lno
		AND bl.lno=r.lno 
		AND rno=#{rsvNum};
	</select>
	<select id="countList" resultType="_int">
		SELECT count(rno) FROM reservation WHERE mno=#{no} AND stno=#{state};
	</select>
</mapper>